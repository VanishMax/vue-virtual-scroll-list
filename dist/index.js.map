{"version":3,"sources":["../src/index.js"],"names":["root","factory","namespace","exports","module","require","define","amd","bind","Vue","_debounce","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","component","props","size","type","Number","required","remain","rtag","String","wtag","wclass","wstyle","Object","pagemode","Boolean","scrollelement","window","HTMLElement","start","offset","variable","Function","bench","debounce","totop","tobottom","onscroll","istable","item","itemcount","itemprops","watch","changeProp","itemModeForceRender","newScrollelement","oldScrollelement","removeScrollListener","addScrollListener","created","keeps","delta","create","direction","scrollTop","end","total","offsetAll","paddingTop","paddingBottom","varCache","varAverSize","varLastCalcIndex","mounted","getZone","setScrollTop","getVarOffset","beforeDestroy","beforeUpdate","calcstart","zone","includes","isLast","$nextTick","forceRender","methods","element","scrollHandler","onScroll","addEventListener","removeEventListener","event","vsl","$refs","elemRect","$el","getBoundingClientRect","top","scrollelementRect","updateZone","param","fireEvent","overs","getVarOvers","Math","floor","shouldRenderNextZone","abs","index","parseInt","max","lastStart","requestAnimationFrame","$forceUpdate","low","middle","middleOffset","high","nocache","cache","i","getVarSize","min","slot","$children","$vnode","$slots","style","data","height","shm","match","getVarPaddingTop","getVarPaddingBottom","last","getVarAllHeight","updateVariable","scrollTo","filter","h","slots","$scopedSlots","length","allHeight","hasPadding","renders","ceil","push","render","dbc","list","renderList","assign","display","attrs","role","before","after","ref","on"],"mappings":"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","sourcesContent":["(function (root, factory) {\n  const namespace = 'VirtualList'\n  /* istanbul ignore next */\n  if (typeof exports === 'object' && typeof module === 'object') {\n    module.exports = factory(namespace, require('vue'))\n  } else if (typeof define === 'function' && define.amd) {\n    define(['vue'], factory.bind(root, namespace))\n  } else if (typeof exports === 'object') {\n    exports[namespace] = factory(namespace, require('vue'))\n  } else {\n    root[namespace] = factory(namespace, root.Vue)\n  }\n})(this, function (namespace, Vue) {\n  /* istanbul ignore next */\n  if (typeof Vue === 'object' && typeof Vue.default === 'function') {\n    Vue = Vue.default\n  }\n\n  /* istanbul ignore next */\n  const _debounce = (func, wait, immediate) => {\n    let timeout\n    return function () {\n      const context = this\n      const args = arguments\n      const later = function () {\n        timeout = null\n        if (!immediate) {\n          func.apply(context, args)\n        }\n      }\n      const callNow = immediate && !timeout\n      clearTimeout(timeout)\n      timeout = setTimeout(later, wait)\n      if (callNow) {\n        func.apply(context, args)\n      }\n    }\n  }\n\n  return Vue.component(namespace, {\n    props: {\n      size: {\n        type: Number,\n        required: true\n      },\n      remain: {\n        type: Number,\n        required: true\n      },\n      rtag: {\n        type: String,\n        default: 'div'\n      },\n      wtag: {\n        type: String,\n        default: 'div'\n      },\n      wclass: {\n        type: String,\n        default: ''\n      },\n      wstyle: {\n        type: Object,\n        default: () => ({})\n      },\n      pagemode: {\n        type: Boolean,\n        default: false\n      },\n      scrollelement: {\n        type: typeof window === 'undefined' ? Object : HTMLElement,\n        default: null\n      },\n      start: {\n        type: Number,\n        default: 0\n      },\n      offset: {\n        type: Number,\n        default: 0\n      },\n      variable: {\n        type: [Function, Boolean],\n        default: false\n      },\n      bench: {\n        type: Number,\n        default: 0 // also equal to remain\n      },\n      debounce: {\n        type: Number,\n        default: 0\n      },\n      totop: {\n        type: [Function, Boolean],\n        default: false\n      },\n      tobottom: {\n        type: [Function, Boolean],\n        default: false\n      },\n      onscroll: {\n        type: [Function, Boolean], // Boolean disables default behavior\n        default: false\n      },\n      istable: {\n        type: Boolean,\n        default: false\n      },\n      item: {\n        type: [Function, Object],\n        default: null\n      },\n      itemcount: {\n        type: Number,\n        default: 0\n      },\n      itemprops: {\n        type: Function,\n        /* istanbul ignore next */\n        default () {}\n      }\n    },\n\n    // use changeProp to identify the prop change.\n    watch: {\n      size () {\n        this.changeProp = 'size'\n      },\n      remain () {\n        this.changeProp = 'remain'\n      },\n      bench () {\n        this.changeProp = 'bench'\n        this.itemModeForceRender()\n      },\n      start () {\n        this.changeProp = 'start'\n        this.itemModeForceRender()\n      },\n      offset () {\n        this.changeProp = 'offset'\n        this.itemModeForceRender()\n      },\n      itemcount () {\n        this.changeProp = 'itemcount'\n        this.itemModeForceRender()\n      },\n      scrollelement (newScrollelement, oldScrollelement) {\n        if (this.pagemode) {\n          return\n        }\n        if (oldScrollelement) {\n          this.removeScrollListener(oldScrollelement)\n        }\n        if (newScrollelement) {\n          this.addScrollListener(newScrollelement)\n        }\n      }\n    },\n\n    created () {\n      const start = this.start >= this.remain ? this.start : 0\n      const keeps = this.remain + (this.bench || this.remain)\n\n      const delta = Object.create(null)\n\n      delta.direction = '' // current scroll direction, D: down, U: up.\n      delta.scrollTop = 0 // current scroll top, use to direction.\n      delta.start = start // start index.\n      delta.end = start + keeps - 1 // end index.\n      delta.keeps = keeps // nums keeping in real dom.\n      delta.total = 0 // all items count, update in filter.\n      delta.offsetAll = 0 // cache all the scrollable offset.\n      delta.paddingTop = 0 // container wrapper real padding-top.\n      delta.paddingBottom = 0 // container wrapper real padding-bottom.\n      delta.varCache = {} // object to cache variable index height and scroll offset.\n      delta.varAverSize = 0 // average/estimate item height before variable be calculated.\n      delta.varLastCalcIndex = 0 // last calculated variable height/offset index, always increase.\n\n      this.delta = delta\n    },\n\n    mounted () {\n      if (this.pagemode) {\n        this.addScrollListener(window)\n      } else if (this.scrollelement) {\n        this.addScrollListener(this.scrollelement)\n      }\n\n      if (this.start) {\n        const start = this.getZone(this.start).start\n        this.setScrollTop(this.variable ? this.getVarOffset(start) : start * this.size)\n      } else if (this.offset) {\n        this.setScrollTop(this.offset)\n      }\n    },\n\n    beforeDestroy () {\n      if (this.pagemode) {\n        this.removeScrollListener(window)\n      } else if (this.scrollelement) {\n        this.removeScrollListener(this.scrollelement)\n      }\n    },\n\n    // check if delta should update when props change.\n    beforeUpdate () {\n      const delta = this.delta\n      delta.keeps = this.remain + (this.bench || this.remain)\n\n      const calcstart = this.changeProp === 'start' ? this.start : delta.start\n      const zone = this.getZone(calcstart)\n\n      // if start, size or offset change, update scroll position.\n      if (this.changeProp && ['start', 'size', 'offset'].includes(this.changeProp)) {\n        const scrollTop = this.changeProp === 'offset'\n          ? this.offset : this.variable\n            ? this.getVarOffset(zone.isLast ? delta.total : zone.start)\n            : zone.isLast && (delta.total - calcstart <= this.remain)\n              ? delta.total * this.size : calcstart * this.size\n\n        this.$nextTick(this.setScrollTop.bind(this, scrollTop))\n      }\n\n      // if points out difference, force update once again.\n      if (\n        this.changeProp ||\n        delta.end !== zone.end ||\n        calcstart !== zone.start\n      ) {\n        this.changeProp = ''\n        delta.end = zone.end\n        delta.start = zone.start\n        this.forceRender()\n      }\n    },\n\n    methods: {\n      // add pagemode/scrollelement scroll event listener\n      addScrollListener (element) {\n        this.scrollHandler = this.debounce ? _debounce(this.onScroll.bind(this), this.debounce) : this.onScroll\n        element.addEventListener('scroll', this.scrollHandler, false)\n      },\n\n      // remove pagemode/scrollelement scroll event listener\n      removeScrollListener (element) {\n        element.removeEventListener('scroll', this.scrollHandler, false)\n      },\n\n      onScroll (event) {\n        const delta = this.delta\n        const vsl = this.$refs.vsl\n        let offset\n\n        if (this.pagemode) {\n          const elemRect = this.$el.getBoundingClientRect()\n          offset = -elemRect.top\n        } else if (this.scrollelement) {\n          const scrollelementRect = this.scrollelement.getBoundingClientRect()\n          const elemRect = this.$el.getBoundingClientRect()\n          offset = scrollelementRect.top - elemRect.top\n        } else {\n          offset = (vsl.$el || vsl).scrollTop || 0\n        }\n\n        delta.direction = offset > delta.scrollTop ? 'D' : 'U'\n        delta.scrollTop = offset\n\n        if (delta.total > delta.keeps) {\n          this.updateZone(offset)\n        } else {\n          delta.end = delta.total - 1\n        }\n\n        const offsetAll = delta.offsetAll\n        if (this.onscroll) {\n          const param = Object.create(null)\n          param.offset = offset\n          param.offsetAll = offsetAll\n          param.start = delta.start\n          param.end = delta.end\n          this.onscroll(event, param)\n        }\n\n        if (!offset && delta.total) {\n          this.fireEvent('totop')\n        }\n\n        if (offset >= offsetAll) {\n          this.fireEvent('tobottom')\n        }\n      },\n\n      // update render zone by scroll offset.\n      updateZone (offset) {\n        const delta = this.delta\n        let overs = this.variable\n          ? this.getVarOvers(offset)\n          : Math.floor(offset / this.size)\n\n        // if scroll up, we'd better decrease it's numbers.\n        if (delta.direction === 'U') {\n          overs = overs - this.remain + 1\n        }\n\n        const zone = this.getZone(overs)\n        const bench = this.bench || this.remain\n\n        // for better performance, if scroll passes items within the bench, do not update.\n        // and if it's close to the last item, render next zone immediately.\n        const shouldRenderNextZone = Math.abs(overs - delta.start - bench) === 1\n        if (\n          !shouldRenderNextZone &&\n          (overs - delta.start <= bench) &&\n          !zone.isLast && (overs > delta.start)\n        ) {\n          return\n        }\n\n        // make sure forceRender calls as less as possible.\n        if (\n          shouldRenderNextZone ||\n          zone.start !== delta.start ||\n          zone.end !== delta.end\n        ) {\n          delta.end = zone.end\n          delta.start = zone.start\n          this.forceRender()\n        }\n      },\n\n      // return the right zone info based on `start/index`.\n      getZone (index) {\n        let start\n        const delta = this.delta\n\n        index = parseInt(index, 10)\n        index = Math.max(0, index)\n\n        const lastStart = delta.total - delta.keeps\n        const isLast = (index <= delta.total && index >= lastStart) || (index > delta.total)\n\n        if (isLast) {\n          start = Math.max(0, lastStart)\n        } else {\n          start = index\n        }\n\n        return {\n          end: start + delta.keeps - 1,\n          start,\n          isLast\n        }\n      },\n\n      // public method, force render ui list if needed.\n      // call this before the next rerender to get better performance.\n      forceRender () {\n        window.requestAnimationFrame(() => {\n          this.$forceUpdate()\n        })\n      },\n\n      // force render ui if using item-mode.\n      itemModeForceRender () {\n        if (this.item) {\n          this.forceRender()\n        }\n      },\n\n      // return the scroll of passed items count in variable.\n      getVarOvers (offset) {\n        let low = 0\n        let middle = 0\n        let middleOffset = 0\n        const delta = this.delta\n        let high = delta.total\n\n        while (low <= high) {\n          middle = low + Math.floor((high - low) / 2)\n          middleOffset = this.getVarOffset(middle)\n\n          // calculate the average variable height at first binary search.\n          if (!delta.varAverSize) {\n            delta.varAverSize = Math.floor(middleOffset / middle)\n          }\n\n          if (middleOffset === offset) {\n            return middle\n          } else if (middleOffset < offset) {\n            low = middle + 1\n          } else if (middleOffset > offset) {\n            high = middle - 1\n          }\n        }\n\n        return low > 0 ? --low : 0\n      },\n\n      // return a variable scroll offset from given index.\n      getVarOffset (index, nocache) {\n        const delta = this.delta\n        const cache = delta.varCache[index]\n\n        if (!nocache && cache) {\n          return cache.offset\n        }\n\n        let offset = 0\n        for (let i = 0; i < index; i++) {\n          const size = this.getVarSize(i, nocache)\n          delta.varCache[i] = {\n            size: size,\n            offset: offset\n          }\n          offset += size\n        }\n\n        delta.varLastCalcIndex = Math.max(delta.varLastCalcIndex, index - 1)\n        delta.varLastCalcIndex = Math.min(delta.varLastCalcIndex, delta.total - 1)\n\n        return offset\n      },\n\n      // return a variable size (height) from given index.\n      getVarSize (index, nocache) {\n        const cache = this.delta.varCache[index]\n        if (!nocache && cache) {\n          return cache.size\n        }\n\n        if (typeof this.variable === 'function') {\n          return this.variable(index) || 0\n        } else {\n          // when using item, it can only get current components height,\n          // need to be enhanced, or consider using variable-function instead\n          const slot = this.item\n            ? (this.$children[index] ? this.$children[index].$vnode : null)\n            : this.$slots.default[index]\n\n          const style = slot && slot.data && slot.data.style\n          if (style && style.height) {\n            const shm = style.height.match(/^(.*)px$/)\n            return (shm && +shm[1]) || 0\n          }\n        }\n        return 0\n      },\n\n      // return the variable paddingTop based on current zone.\n      // @todo: if set a large `start` before variable was calculated,\n      // here will also case too much offset calculate when list is very large,\n      // consider use estimate paddingTop in this case just like `getVarPaddingBottom`.\n      getVarPaddingTop () {\n        return this.getVarOffset(this.delta.start)\n      },\n\n      // return the variable paddingBottom based on the current zone.\n      getVarPaddingBottom () {\n        const delta = this.delta\n        const last = delta.total - 1\n        if (delta.total - delta.end <= delta.keeps || delta.varLastCalcIndex === last) {\n          return this.getVarOffset(last) - this.getVarOffset(delta.end)\n        } else {\n          // if unreached last zone or uncalculated real behind offset\n          // return the estimate paddingBottom and avoid too much calculations.\n          return (delta.total - delta.end) * (delta.varAverSize || this.size)\n        }\n      },\n\n      // return the variable all heights use to judge reach bottom.\n      getVarAllHeight () {\n        const delta = this.delta\n        if (delta.total - delta.end <= delta.keeps || delta.varLastCalcIndex === delta.total - 1) {\n          return this.getVarOffset(delta.total)\n        } else {\n          return this.getVarOffset(delta.start) + (delta.total - delta.end) * (delta.varAverSize || this.size)\n        }\n      },\n\n      // public method, allow the parent update variable by index.\n      updateVariable (index) {\n        // clear/update all the offsets and heights ahead of index.\n        this.getVarOffset(index, true)\n      },\n\n      // trigger a props event on parent.\n      fireEvent (event) {\n        if (this[event]) {\n          this[event]()\n        }\n      },\n\n      // set manual scroll top.\n      setScrollTop (scrollTop) {\n        if (this.pagemode) {\n          window.scrollTo(0, scrollTop)\n        } else if (this.scrollelement) {\n          this.scrollelement.scrollTo(0, scrollTop)\n        } else {\n          const vsl = this.$refs.vsl\n          if (vsl) {\n            (vsl.$el || vsl).scrollTop = scrollTop\n          }\n        }\n      },\n\n      // filter the shown items based on `start` and `end`.\n      filter (h) {\n        const delta = this.delta\n        const slots = this.$slots.default || []\n\n        // item-mode should be decided from items prop.\n        if (this.item || this.$scopedSlots.item) {\n          delta.total = this.itemcount\n          if (delta.keeps > delta.total) {\n            delta.end = delta.total - 1\n          }\n        } else {\n          if (!slots.length) {\n            delta.start = 0\n          }\n          delta.total = slots.length\n        }\n\n        let paddingTop, paddingBottom, allHeight\n        const hasPadding = delta.total > delta.keeps\n\n        if (this.variable) {\n          allHeight = this.getVarAllHeight()\n          paddingTop = hasPadding ? this.getVarPaddingTop() : 0\n          paddingBottom = hasPadding ? this.getVarPaddingBottom() : 0\n        } else {\n          allHeight = this.size * delta.total\n          paddingTop = this.size * (hasPadding ? delta.start : 0)\n          paddingBottom = this.size * (hasPadding ? delta.total - delta.keeps : 0) - paddingTop\n        }\n\n        if (paddingBottom < this.size) {\n          paddingBottom = 0\n        }\n\n        delta.paddingTop = paddingTop\n        delta.paddingBottom = paddingBottom\n        delta.offsetAll = allHeight - this.size * this.remain\n\n        const renders = []\n        for (let i = delta.start; i < delta.total && i <= Math.ceil(delta.end); i++) {\n          let slot = null\n          if (this.$scopedSlots.item) {\n            slot = this.$scopedSlots.item(i)\n          } else if (this.item) {\n            slot = h(this.item, this.itemprops(i))\n          } else {\n            slot = slots[i]\n          }\n          renders.push(slot)\n        }\n\n        return renders\n      }\n    },\n\n    render (h) {\n      const dbc = this.debounce\n      let list = this.filter(h)\n      const { paddingTop, paddingBottom } = this.delta\n\n      const istable = this.istable\n      const wtag = istable ? 'div' : this.wtag\n      const rtag = istable ? 'div' : this.rtag\n      if (istable) {\n        list = [h('table', [h('tbody', list)])]\n      }\n      const renderList = h(wtag, {\n        style: Object.assign({\n          display: 'block',\n          'padding-top': paddingTop + 'px',\n          'padding-bottom': paddingBottom + 'px'\n        }, this.wstyle),\n        class: this.wclass,\n        attrs: {\n          role: 'group'\n        }\n      }, [\n        this.$slots.before,\n        list,\n        this.$slots.after\n      ])\n\n      // page mode just render list, no wrapper.\n      if (this.pagemode || this.scrollelement) {\n        return renderList\n      }\n\n      return h(rtag, {\n        ref: 'vsl',\n        style: {\n          display: 'block',\n          'overflow-y': this.size >= this.remain ? 'auto' : 'initial',\n          height: this.size * this.remain + 'px'\n        },\n        on: {\n          '&scroll': dbc ? _debounce(this.onScroll.bind(this), dbc) : this.onScroll\n        }\n      }, [\n        renderList\n      ])\n    }\n  })\n})\n"],"file":"index.js"}